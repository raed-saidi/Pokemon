<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=copyright" />
  <title>Pok√©mon Battle</title>
</head>
<body>
  <h1 class="title">Les Combattants</h1>
  <button id="startBattleBtn">Start Battle</button>
  <div id="battleLog"></div>
  <div id="winnerLog"></div>
</div>
<footer>
    <span class="material-symbols-outlined">
        copyright
    </span> 
KHARRAT YOSSR  -  LASSOUED MONTAHA  -   SAIDI RAED
</footer>

  <script>
    const startBattleBtn = document.getElementById('startBattleBtn');
    const battleLog = document.getElementById('battleLog');
    const winnerLog = document.getElementById('winnerLog');

    startBattleBtn.addEventListener('click', function () {
      fetch('index.php')
        .then(response => response.json())
        .then(data => {
          battleLog.innerHTML = '';
          data.forEach(stat => {
            battleLog.innerHTML += `
            <div class='fighter-container'>
              <div class="fighter-inner-container">
                <div class='fighter'>
                  <div class='fighterid'> 
                    <h2>${stat[0].name}</h2>
                    <img src="${stat[0].img}" />
                  </div>
                  <h3>Points: ${stat[0].points}</h3>
                  <h3>Min Attack Points: ${stat[0].minAttack}</h3>
                  <h3>Max Attack Points: ${stat[0].maxAttack}</h3>
                  <h3>Special Attack: ${stat[0].specialAttack}</h3>
                  <h3>Probability Special Attack: ${stat[0].probabilitySpecial}</h3>
                </div>

                <div class='fighter'>
                  <div class='fighterid'>
                    <h2>${stat[1].name}</h2>
                    <img src="${stat[1].img}" />
                  </div>
                  <h3>Points: ${stat[1].points}</h3>
                  <h3>Min Attack Points: ${stat[1].minAttack}</h3>
                  <h3>Max Attack Points: ${stat[1].maxAttack}</h3>
                  <h3>Special Attack: ${stat[1].specialAttack}</h3>
                  <h3>Probability Special Attack: ${stat[1].probabilitySpecial}</h3>
                </div>  
              </div>

              <div class='score-container'>
                <h2>ROUND ${stat[0].round}</h2>
                <div class='score'>
                  <h3>${stat[0].damage}</h3>
                  <h3>${stat[1].damage}</h3>
                </div>
              </div>
            </div>
            `;

            if (stat[0].points <= 0 || stat[1].points <= 0) {
              const winner = stat[0].points > 0 ? stat[0].name : stat[1].name;
              winnerLog.innerHTML = `<h2>The Winner is: ${winner}!</h2>`;
            }
          });
        })
        .catch(error => {
          console.error('Error fetching battle data:', error);
          battleLog.innerHTML = 'Error starting the battle.';
        });
    });
  </script>
</body>
</html>

